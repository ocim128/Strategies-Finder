<!-- Replay Tab - Bar-by-bar strategy signal visualization -->
<div class="replay-container" id="replayTab">
    <!-- Header with status -->
    <div class="replay-header">
        <div class="replay-status">
            <span class="replay-status-dot" id="replayStatusDot"></span>
            <span class="replay-status-text" id="replayStatusText">Ready</span>
        </div>
        <div class="replay-bar-counter">
            <span id="replayCurrentBar">0</span>
            <span class="replay-bar-separator">/</span>
            <span id="replayTotalBars">0</span>
            <span class="replay-bar-label">bars</span>
        </div>
    </div>

    <!-- Progress Bar (seekable) -->
    <div class="replay-progress-container">
        <div class="replay-progress" id="replayProgress">
            <div class="replay-progress-fill" id="replayProgressFill"></div>
            <div class="replay-progress-thumb" id="replayProgressThumb"></div>
        </div>
    </div>

    <!-- Transport Controls -->
    <div class="replay-controls">
        <button class="replay-btn" id="replayStepBack" title="Step Back (←)">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
            </svg>
        </button>

        <button class="replay-btn replay-btn-primary" id="replayPlayPause" title="Play/Pause (Space)">
            <svg viewBox="0 0 24 24" fill="currentColor" class="play-icon">
                <path d="M8 5v14l11-7z" />
            </svg>
            <svg viewBox="0 0 24 24" fill="currentColor" class="pause-icon" style="display:none">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
            </svg>
        </button>

        <button class="replay-btn" id="replayStepForward" title="Step Forward (→)">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
            </svg>
        </button>

        <button class="replay-btn" id="replayStop" title="Stop (Esc)">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 6h12v12H6z" />
            </svg>
        </button>
    </div>

    <!-- Speed Slider -->
    <div class="replay-speed-section">
        <label class="replay-speed-label">Speed</label>
        <div class="replay-speed-control">
            <input type="range" id="replaySpeedSlider" min="0.1" max="20" step="0.1" value="1"
                class="replay-speed-slider">
            <span class="replay-speed-value" id="replaySpeedValue">1.0x</span>
        </div>
        <div class="replay-speed-presets">
            <button class="speed-preset" data-speed="0.5">0.5x</button>
            <button class="speed-preset active" data-speed="1">1x</button>
            <button class="speed-preset" data-speed="2">2x</button>
            <button class="speed-preset" data-speed="5">5x</button>
            <button class="speed-preset" data-speed="10">10x</button>
        </div>
    </div>

    <!-- Start Replay Section -->
    <div class="replay-start-section">
        <p class="replay-info-text">
            Replay visualizes how your strategy generates buy/sell signals bar-by-bar.
        </p>
        <button class="btn btn-primary btn-full" id="replayStartBtn" disabled>
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z" />
            </svg>
            Start Replay
        </button>
        <p class="replay-hint">Run a backtest first to enable replay</p>
    </div>

    <!-- Signal Log -->
    <div class="replay-signals-section">
        <div class="replay-signals-header">
            <h4 class="replay-signals-title">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                </svg>
                Signal Log
            </h4>
            <span class="replay-signals-count" id="replaySignalCount">0</span>
        </div>
        <div class="replay-signals-list" id="replaySignalList">
            <div class="replay-signals-empty">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                </svg>
                <p>No signals yet</p>
                <span>Start replay to see signals</span>
            </div>
        </div>
    </div>
</div>