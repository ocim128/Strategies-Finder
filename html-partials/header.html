<header class="header">
    <div class="header-left">
        <div class="logo">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" />
            </svg>
            Strategy Tester
        </div>

        <div class="dropdown">
            <div class="symbol-selector" id="symbolSelector" role="button" tabindex="0">
                <span class="symbol-name" id="symbolName">ETH/USDT</span>
                <span class="symbol-price" id="symbolPrice">Loading...</span>
                <span class="symbol-change" id="symbolChange">+0.00%</span>
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                    <path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" fill="none" />
                </svg>
            </div>
            <div class="dropdown-menu symbol-search-dropdown" id="symbolDropdown">
                <!-- Search Input Section -->
                <div class="symbol-search-container">
                    <div class="symbol-search-input-wrapper">
                        <svg class="symbol-search-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                        <input type="text" id="symbolSearchInput" class="symbol-search-input"
                            placeholder="Search stocks, crypto, commodities..." autocomplete="off" spellcheck="false" />
                        <div class="symbol-search-spinner is-hidden" id="symbolSearchSpinner">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10" opacity="0.25" />
                                <path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round" />
                            </svg>
                        </div>
                        <button class="symbol-search-clear is-hidden" id="symbolSearchClear" type="button"
                            title="Clear search">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Search Results Container -->
                <div class="symbol-search-results" id="symbolSearchResults">
                    <!-- Dynamic results will be inserted here -->
                    <div class="symbol-search-loading is-hidden" id="symbolSearchLoading">
                        <span class="symbol-search-loading-text">Loading pairs...</span>
                    </div>
                    <div class="symbol-search-empty is-hidden" id="symbolSearchEmpty">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                        <span>No pairs found</span>
                    </div>
                </div>

                <div class="dropdown-divider"></div>

                <!-- Other Markets Section -->
                <div class="symbol-search-section">
                    <div class="dropdown-header">Mock Data (For Testing)</div>
                    <div class="mock-model-row">
                        <label class="mock-model-label" for="mockModelSelect">Mock Model</label>
                        <select class="mock-model-select" id="mockModelSelect">
                            <option value="simple">Simple (V1)</option>
                            <option value="hard">Regime (V2)</option>
                            <option value="v3">Adversarial (V3)</option>
                            <option value="v4">Market Realism (V4)</option>
                        </select>
                    </div>
                    <div class="mock-model-row">
                        <label class="mock-model-label" for="mockBarsInput">Mock Candles</label>
                        <input type="number" class="mock-model-input" id="mockBarsInput" min="100" max="30000000"
                            step="100" value="30000" inputmode="numeric" />
                    </div>
                    <div class="dropdown-item" data-symbol="MOCK_STOCK" role="button" tabindex="0">
                        <span class="symbol-item-badge stock">Mock</span>
                        MOCK_STOCK (Test Stock)
                    </div>
                    <div class="dropdown-item" data-symbol="MOCK_CRYPTO" role="button" tabindex="0">
                        <span class="symbol-item-badge crypto">Mock</span>
                        MOCK_CRYPTO (Test Crypto)
                    </div>
                    <div class="dropdown-item" data-symbol="MOCK_FOREX" role="button" tabindex="0">
                        <span class="symbol-item-badge forex">Mock</span>
                        MOCK_FOREX (Test Forex)
                    </div>
                </div>
            </div>
        </div>

        <div class="timeframe-tabs" id="timeframeTabs">
            <button class="timeframe-tab" data-interval="1m">1m</button>
            <button class="timeframe-tab" data-interval="3m">3m</button>
            <button class="timeframe-tab" data-interval="5m">5m</button>
            <button class="timeframe-tab" data-interval="15m">15m</button>
            <button class="timeframe-tab" data-interval="1h">1H</button>
            <button class="timeframe-tab" data-interval="4h">4H</button>
            <button class="timeframe-tab active" data-interval="1d">1D</button>
            <button class="timeframe-tab" data-interval="1w">1W</button>
            <div class="timeframe-custom" id="timeframeCustom">
                <input type="number" id="timeframeMinutesInput" class="timeframe-custom-input" min="1" max="10080"
                    step="1" placeholder="min" inputmode="numeric" aria-label="Custom minutes" />
                <span class="timeframe-custom-suffix">m</span>
                <button class="timeframe-custom-apply" id="timeframeMinutesApply" type="button"
                    title="Apply custom minutes">Set</button>
            </div>
        </div>

        <div class="chart-mode-selector" id="chartModeSelector">
            <select class="chart-mode-select" id="chartModeSelect" title="Chart display mode">
                <option value="candlestick">Candlestick</option>
                <option value="heikin-ashi">Heikin Ashi</option>
            </select>
        </div>

    <div class="header-right">
        <button class="btn btn-secondary" id="togglePanel">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z" />
            </svg>
            Strategy Panel
        </button>
        <button class="theme-toggle" id="themeToggle" title="Toggle theme">
            <svg id="moonIcon" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z" />
            </svg>
            <svg id="sunIcon" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1z" />
            </svg>
        </button>
    </div>
</header>