<!-- Finder Tab -->
<div id="finderTab">
    <div class="section-title">Strategy Finder</div>

    <div class="section-header">
        <div class="section-title">Sorting</div>
        <div style="display: flex; align-items: center; gap: 8px;">
            <span style="font-size: 10px; color: var(--text-secondary); font-weight: 600;">ADVANCED</span>
            <label class="section-toggle" aria-label="Toggle advanced sort">
                <input type="checkbox" id="finderAdvancedToggle">
                <span class="section-toggle-track"></span>
            </label>
        </div>
    </div>

    <!-- Simple Sort Mode -->
    <div class="param-row" id="finderSimpleSort">
        <div class="param-group">
            <label class="param-label">Sort By</label>
            <select class="param-input" id="finderSort">
                <!-- Populated by JS -->
            </select>
        </div>
        <div class="param-group">
            <label class="param-label">Then By</label>
            <select class="param-input" id="finderSortSecondary">
                <!-- Populated by JS -->
            </select>
        </div>
    </div>

    <!-- Advanced Sort Mode -->
    <div class="finder-sort-list" id="finderSortList" style="display: none;">
        <!-- Sort Items injected by JS -->
    </div>

    <div class="param-row">
        <div class="param-group">
            <label class="param-label">Top Results</label>
            <input type="number" class="param-input" id="finderTopN" value="10" min="1" max="100">
        </div>
        <div class="param-group">
            <label class="param-label">Runs / Strategy</label>
            <input type="number" class="param-input" id="finderMaxRuns" value="120" min="1" max="1000">
        </div>
    </div>

    <div class="param-row">
        <div class="param-group">
            <label class="param-label">Search Mode</label>
            <select class="param-input" id="finderMode">
                <option value="grid">Grid Sweep</option>
                <option value="random" selected>Random Search</option>
            </select>
        </div>
        <div class="param-group">
            <label class="param-label">Range (%)</label>
            <input type="number" class="param-input" id="finderRange" value="35" min="0" max="1000" step="5">
        </div>
    </div>

    <div class="param-row">
        <div class="param-group">
            <label class="param-label">Steps / Param</label>
            <input type="number" class="param-input" id="finderSteps" value="3" min="2" max="7">
        </div>
    </div>

    <div class="section-header">
        <div class="section-title">Strategies</div>
        <label class="section-toggle" aria-label="Toggle all strategies">
            <input type="checkbox" id="finderStrategiesToggleAll">
            <span class="section-toggle-track"></span>
        </label>
    </div>
    <div class="section-body strategy-list-container" id="finderStrategyList">
        <!-- Strategies will be injected here -->
    </div>

    <div class="section-header">

        <div class="section-title">Trade Count Filter</div>
        <label class="section-toggle" aria-label="Toggle trade count filter">
            <input type="checkbox" id="finderTradesToggle" checked>
            <span class="section-toggle-track"></span>
        </label>
    </div>
    <div class="section-body" id="finderTradeFilters">
        <div class="param-row">
            <div class="param-group">
                <label class="param-label">Min Trades</label>
                <input type="number" class="param-input" id="finderTradesMin" value="40" min="0">
            </div>
            <div class="param-group">
                <label class="param-label">Max Trades</label>
                <input type="number" class="param-input" id="finderTradesMax" placeholder="No max" min="0">
            </div>
        </div>
    </div>

    <div class="section-header">
        <div class="section-title">OOS Durability Filter</div>
        <label class="section-toggle" aria-label="Toggle OOS durability filter">
            <input type="checkbox" id="finderDurabilityToggle" checked>
            <span class="section-toggle-track"></span>
        </label>
    </div>
    <div class="section-body" id="finderDurabilitySettings">
        <div class="param-row">
            <div class="param-group">
                <label class="param-label">Holdout (%)</label>
                <input type="number" class="param-input" id="finderDurabilityHoldout" value="35" min="10" max="50">
            </div>
            <div class="param-group">
                <label class="param-label">Min OOS Trades</label>
                <input type="number" class="param-input" id="finderDurabilityMinTrades" value="10" min="1">
            </div>
        </div>
        <div class="param-row">
            <div class="param-group">
                <label class="param-label">Min Durability Score</label>
                <input type="number" class="param-input" id="finderDurabilityMinScore" value="60" min="0" max="100">
            </div>
        </div>
    </div>

    <button class="btn btn-primary run-btn" id="runFinder">
        <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z" />
        </svg>
        Run Finder
    </button>

    <div class="progress-container" id="finderProgress">
        <div class="progress-bar">
            <div class="progress-fill" id="finderProgressFill"></div>
        </div>
        <div class="progress-text" id="finderProgressText">Ready</div>
    </div>

    <div class="finder-status" id="finderStatus">Idle</div>

    <div class="finder-results">
        <div class="finder-actions-bar">
            <button class="btn btn-secondary btn-compact" id="finderCopyTopResults" type="button"
                title="Copy metadata for all top results">
                Copy Top Results
            </button>
        </div>
        <div class="finder-header">
            <span>Rank</span>
            <span>Strategy</span>
            <span>Use</span>
        </div>
        <div class="empty-state empty-state-illustrated" id="finderEmpty">
            <div class="empty-state-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                </svg>
            </div>
            <h3 class="empty-state-title">Find Your Best Strategy</h3>
            <p class="empty-state-description">
                Run the Strategy Finder to test thousands of parameter combinations and discover optimal settings.
            </p>
            <div class="tip-card tip-keyboard" style="margin-top: var(--space-4); text-align: left;">
                <div class="tip-card-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                    </svg>
                </div>
                <div class="tip-card-content">
                    <div class="tip-card-title">Quick Start</div>
                    <div class="tip-card-text">Select strategies above, configure search settings, then click
                        <strong>Run Finder</strong>.</div>
                </div>
            </div>
        </div>
        <div class="finder-list" id="finderList">
        </div>
    </div>
</div>
